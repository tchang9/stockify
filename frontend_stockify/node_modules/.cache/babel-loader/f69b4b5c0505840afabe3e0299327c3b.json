{"ast":null,"code":"import _defineProperty from \"/Users/tchang/Development/stockify/frontend_stockify/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/tchang/Development/stockify/frontend_stockify/src/components/Portfolio.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport v4 from 'uuid';\n\nclass Portfolio extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      balance: 0,\n      userStocks: {},\n      buy: {\n        ticker: \"\",\n        quantity: 0\n      }\n    };\n\n    this.renderStocks = () => {\n      return Object.keys(this.state.userStocks).map(ticker => {\n        // debugger\n        const quantity = this.state.userStocks[ticker].quantity;\n        const price = parseFloat(this.state.userStocks[ticker].price).toFixed(2);\n        return React.createElement(\"div\", {\n          key: v4(),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 43\n          },\n          __self: this\n        }, ticker, \" - \", quantity, \" Shares          \", (price * quantity).toFixed(2));\n      });\n    };\n\n    this.renderTotalStocks = () => {\n      let total = 0;\n\n      for (const ticker in this.state.userStocks) {\n        total += this.state.userStocks[ticker].quantity * parseFloat(this.state.userStocks[ticker].price).toFixed(2);\n      }\n\n      return total.toFixed(2);\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        buy: _objectSpread({}, this.state.buy, {\n          [e.target.name]: e.target.value\n        })\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      fetch(\"http://localhost:3000/buy\", {\n        method: \"POST\",\n        body: JSON.stringify(this.state.buy),\n        headers: {\n          'Content-Type': 'application/json',\n          \"Authorization\": localStorage.getItem(\"token\")\n        }\n      }).then(res => res.json()).then(res => {\n        if (res.message) {\n          console.log(res.message);\n        } else {\n          console.log(res);\n          let newStockTotal = res.quantity;\n\n          if (this.state.userStocks[res.stock_ticker]) {\n            newStockTotal += this.state.userStocks[res.stock_ticker].quantity;\n          }\n\n          this.setState({\n            userStocks: _objectSpread({}, this.state.userStocks, {\n              [res.stock_ticker]: _objectSpread({}, this.state.userStocks[res.stock_ticker], {\n                quantity: newStockTotal\n              })\n            }),\n            balance: res.user.balance\n          });\n        }\n      });\n    };\n  }\n\n  componentDidMount() {\n    const userId = localStorage.getItem(\"token\");\n    fetch(\"http://localhost:3000/userstocks\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        id: userId\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json()).then(res => {\n      if (res.message) {\n        console.log(res.message);\n      } else {\n        this.setState({\n          userStocks: _objectSpread({}, res.transactions),\n          balance: res.balance\n        });\n      }\n    });\n  }\n\n  render() {\n    console.log(this.state.userStocks);\n    return React.createElement(React.Fragment, null, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, \"Portfolio \", this.renderTotalStocks()), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, this.renderStocks()), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"Balance - \", this.state.balance), React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, \"Stock Ticker\", React.createElement(\"input\", {\n      name: \"ticker\",\n      type: \"text\",\n      value: this.state.buy.ticker,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }), \"Quantity:\", React.createElement(\"input\", {\n      name: \"quantity\",\n      type: \"number\",\n      min: \"1\",\n      value: this.state.buy.quantity,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"submit\",\n      onClick: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"Buy Stocks\")));\n  }\n\n}\n\nexport default Portfolio;","map":{"version":3,"sources":["/Users/tchang/Development/stockify/frontend_stockify/src/components/Portfolio.js"],"names":["React","v4","Portfolio","Component","state","balance","userStocks","buy","ticker","quantity","renderStocks","Object","keys","map","price","parseFloat","toFixed","renderTotalStocks","total","handleChange","e","setState","target","name","value","handleSubmit","preventDefault","fetch","method","body","JSON","stringify","headers","localStorage","getItem","then","res","json","message","console","log","newStockTotal","stock_ticker","user","componentDidMount","userId","id","transactions","render"],"mappings":"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","sourcesContent":["import React from 'react'\nimport v4 from 'uuid'\n\nclass Portfolio extends React.Component {\n\n    state = {\n        balance: 0,\n        userStocks: {},\n        buy: {\n            ticker: \"\",\n            quantity: 0\n        }\n    }\n\n    componentDidMount() {\n        const userId = localStorage.getItem(\"token\")\n        fetch(`http://localhost:3000/userstocks`, {\n            method: \"POST\", \n            body: JSON.stringify({id:userId}),\n            headers:{\n                'Content-Type': 'application/json'\n            }\n        })\n        .then( res => res.json())\n        .then( res => {\n            if (res.message) {\n                console.log(res.message)\n            } else {\n                this.setState({\n                    userStocks: {...res.transactions},\n                    balance: res.balance\n                })\n            }\n        })\n    }\n\n    renderStocks = () => {\n        return Object.keys(this.state.userStocks).map(ticker => {\n            // debugger\n            const quantity = this.state.userStocks[ticker].quantity\n            const price = parseFloat(this.state.userStocks[ticker].price).toFixed(2)\n            return (\n                <div key={ v4() }>{ticker} - {quantity} Shares          {(price * quantity).toFixed(2)}</div>\n            )\n        })\n    }\n\n    renderTotalStocks = () => {\n        let total = 0\n        for (const ticker in this.state.userStocks) {\n            total += this.state.userStocks[ticker].quantity * parseFloat(this.state.userStocks[ticker].price).toFixed(2)\n        }\n        return total.toFixed(2)\n    }\n\n    handleChange = (e) => {\n        this.setState({\n            buy: {...this.state.buy, [e.target.name]: e.target.value}\n        })\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault()\n        fetch(`http://localhost:3000/buy`, {\n            method: \"POST\", \n            body: JSON.stringify(this.state.buy),\n            headers:{\n                'Content-Type': 'application/json',\n                \"Authorization\": localStorage.getItem(\"token\")\n            }\n        })\n        .then( res => res.json())\n        .then( res => {\n            if (res.message) {\n                console.log(res.message)\n            } else {\n                console.log(res)\n                let newStockTotal = res.quantity\n                if (this.state.userStocks[res.stock_ticker]) {\n                    newStockTotal += this.state.userStocks[res.stock_ticker].quantity\n                }\n                this.setState({\n                    userStocks: {...this.state.userStocks,\n                        [res.stock_ticker]: {\n                            ...this.state.userStocks[res.stock_ticker],\n                                quantity: newStockTotal\n                        }\n                    },\n                    balance: res.user.balance\n                })\n            }\n        })\n    }\n\n    render() {\n        console.log(this.state.userStocks)\n        return (\n            <>\n                <h1>Portfolio {this.renderTotalStocks()}</h1>\n                <div>{this.renderStocks()}</div>\n                <h2>Balance - {this.state.balance}</h2>\n                <form>\n                    Stock Ticker\n                    <input\n                        name=\"ticker\" \n                        type=\"text\" \n                        value={this.state.buy.ticker}\n                        onChange={this.handleChange}/>\n                    Quantity:\n                    <input\n                        name=\"quantity\"\n                        type=\"number\" \n                        min=\"1\"\n                        value={this.state.buy.quantity}\n                        onChange={this.handleChange}/>\n                    <button type=\"submit\" onClick={this.handleSubmit}>Buy Stocks</button>\n                </form>\n            </>\n        )\n    }\n}\n\nexport default Portfolio"]},"metadata":{},"sourceType":"module"}